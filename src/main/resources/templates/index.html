<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org" lang="en">
  <head>
    <div th:replace="layout :: common-head">
      <th:block th:with="title='Home'">
      <title th:text="${title}">JCCC: Home</title> 
    </th:block>
  </div>
    </head>

  <body class="d-flex flex-column h-100">
    <!--Nav section-->
    <header th:replace="layout :: header"></header>
    <!--Main section-->
    <main class="flex-fill">
      <div class="container col-xxl-8 px-4 py-5">
        <div class="row g-5 py-5 row-cols-1 row-cols-lg-2">
          <div class="col-lg-6 order-last order-lg-first">
            <h1 class="display-5 1h-1 mb-3">
              <span class="logoFont">Java Coders Community Chat</span>
              <br />A Demo Coding Project
            </h1>
            <h4 class="lead">
              Welcome to the Java Coders Community Chat,
              <strong>a fictious business demo project</strong> by SJ Wonder.
              This fullstack, responsive application allows you to read, add,
              update and delete transactions using Java, Spring Boot, Thymeleaf,
              and vanilla Javascript.
            </h4>
            <ul class="fa-ul pt-2">
              <li>
                <span class="bi-li"
                  ><i class="bi bi-check-circle-fill"></i></span
                >Spring Boot MVC
              </li>
              <li>
                <span class="bi-li"
                  ><i class="bi bi-check-circle-fill"></i></span
                >Thymeleaf Templating
              </li>

              <li>
                <span class="bi-li"
                  ><i class="bi bi-check-circle-fill"></i></span
                >Repository and Service Layers
              </li>
              <li>
                <span class="bi-li"
                  ><i class="bi bi-check-circle-fill"></i></span
                >Full CRUD Operations
              </li>

              <li>
                <span class="bi-li"
                  ><i class="bi bi-check-circle-fill"></i></span
                >Custom CSS and Bootstrap Layout
              </li>

              <li>
                <span class="bi-li"
                  ><i class="bi bi-check-circle-fill"></i></span
                >Javascript Functionalities
              </li>
              
            </ul>
          </div>
          
          <div class="col-lg-6 order-last order-lg-first">
            <!-- login form content here -->
              <div id="login" class="col-md-12 pt-3" >
                     <h1 class="d-flex justify-content-start my-5">Welcome!</h1>
                     <h3 class="lead">
                       Please enter your username and password to join the chat channel.</h3>
                      <form id="loginForm" class="row g-3" action="" th:action="@{/login}" method="POST">
                       <div class="col-12 mb-3">
                         <label for="username" class="form-label" aria label="username"
                           >Username</label
                         >
                         <input
                           type="text" id="username"
                           class="form-control"
                           th:field="${user.username}"
                         />
                       </div>
                        <div class="col-12 mb-3">
                          <label for="password" class="form-label" aria label="password"
                            >Password</label
                          >
                          <input
                            type="password" id="password"
                            class="form-control"
                            th:field="${user.password}"
                          />
                        </div>
         
                       <div class="col justify-content-start mb-3">
                         <input
                           type="submit"
                           id="loginBtn"
                           class="btn btn-primary"
                           value="Let's Chat!"
                         />
                        </div>
                      </form>
                      <a class="btn btn-danger ms-1"  id="registerBtn" th:href="@{/}">Register</a>
              </div>

              <!-- Registration form content here -->
               <div id="registrationForm" class="col-md-12 pt-3" style="display:none;">
                        <!-- Registration form content here -->
                        <div class="col-12 pt-3">
                          <h1 class="d-flex justify-content-start my-5">Create Your Account</h1>
                          <!-- Display error message if username exists -->
                            <div th:if="${errorMessage}" class="alert alert-danger" role="alert">
                              <p th:text="${errorMessage}"></p>
                          </div>
                          <form class="row g-3" action="" th:action="@{/register}" method="POST">
                            <div class="col-12 mb-3">
                              <label for="username" class="form-label" aria label="username"
                                >Username</label
                              >
                              <input
                                type="text"
                                class="form-control"
                                id="regUsername"
                                th:field="${user.username}"
                              />
                            </div>
              
                            <div class="col-12 mb-3">
                              <label for="password" class="form-label" aria label="password"
                                >Password</label
                              >
                              <input
                                type="text"
                                class="form-control"
                                th:field="${user.password}"
                              />
                            </div>
              
                            <div class="col-12 mb-3">
                              <label for="fullname" class="form-label" aria label="full name"
                                >Full Name</label
                              ><input
                                type="text"
                                class="form-control"
                                th:field="${user.name}"
                              />
                            </div>
                            
              
                            <div class="col justify-content-start mb-3">
                              <input
                                type="submit"
                                class="btn btn-primary"
                                value="Create Account"
                              />
                              <a class="btn btn-danger ms-1" th:href="@{/}">Back</a>
                            </div>
              
                          </form>
                        </div>
                        <a class="btn btn-danger ms-1" href="#" id="backBtn">Back</a>
                </div>

              <!-- Channel selection content here -->
              <div id="channelSelect" class="col-md-12 pt-3" style="display:none;">
                <div class="card">
                  <div class="card-header">
                    Available Channels
                  </div>
                  <div class="card-body">
                    <h5 class="card-title">Welcome to to the Java Community Chat! Select a channel to begin.</h5>
                      <ol class="list-group list-group-numbered">
                        <!-- Thymeleaf foreach loop to iterate over channels -->
                        <li th:each="channel: ${channels}" class="list-group-item d-flex justify-content-between align-items-start">
                          <div class="ms-2 me-auto">
                            <h3 class="fw-bold" th:text="${channel.name}"></h3>
                            <h4 class="fw-bold mt-2" th:text="${channel.description}"></h4>
                          </div>
                          <!--display number of participants currently in the channel-->
                          <span class="badge text-bg-primary rounded-pill" th:id="'participantCount' + ${channel.id}">0</span>
                        </li>
                        
                      </ol> 
               </div>  
                </div>  
              </div>
          </div>
        </div>
        </div>
      </div>
    </main>
    <!--footer section-->
    <footer th:replace="layout :: footer"></footer>
    <!-- scripts -->
    <div th:replace="layout :: IndexJS"></div>
    <div th:replace="layout :: BootstrapJS"></div>
  </body>
</html>